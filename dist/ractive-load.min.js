!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("ractive")):"function"==typeof define&&define.amd?define(["ractive"],t):e.Ractive.load=t(e.Ractive)}(this,function(e){"use strict";function t(e){var t,r,n;return t=e.split("/"),r=t.pop(),n=r.lastIndexOf("."),-1!==n&&(r=r.substr(0,n)),r}function r(e,t){var r,n,o=0,i=0;for(r=e.map(function(e){var t=i+e.length+1;return i=t,t});t>=r[o];)i=r[o],o+=1;return n=t-i,{line:o,column:n,"char":t}}function n(e){var n,i,u,a,s,c,f,p,l,d,m;if(!$.Ractive)throw new Error("rcu has not been initialised! You must call rcu.init(Ractive) before rcu.parse()");if(n=$.Ractive.parse(e,{noStringify:!0,interpolate:{script:!1,style:!1},includeLinePositions:!0}),n.v!==P)throw new Error("Mismatched template version (expected "+P+", got "+n.v+")! Please ensure you are using the latest version of Ractive.js in your build process as well as in your app");for(u=[],c=[],p=[],i=n.t,l=i.length;l--;)if(d=i[l],d&&7===d.t){if("link"===d.e&&d.a&&"ractive"===d.a.rel&&u.push(i.splice(l,1)[0]),!("script"!==d.e||d.a&&d.a.type&&"text/javascript"!==d.a.type)){if(s)throw new Error("You can only have one <script> tag per component file");s=i.splice(l,1)[0]}"style"!==d.e||d.a&&d.a.type&&"text/css"!==d.a.type||c.push(i.splice(l,1)[0])}for(;/^\s*$/.test(i[0]);)i.shift();for(;/^\s*$/.test(i[i.length-1]);)i.pop();if(a=u.map(function(e){var r,n;if(r=e.a.href,n=e.a.name||t(r),"string"!=typeof n)throw new Error("Error parsing link tag");return{name:n,href:r}}),m={source:e,template:n,imports:a,css:c.map(o).join(" "),script:"",modules:p},s)for(function(){var t,n,o;t=e.indexOf(">",s.p[2])+1,n=t+s.f[0].length,o=e.split("\n"),m.scriptStart=r(o,t),m.scriptEnd=r(o,n)}(),m.script=s.f[0];f=A.exec(m.script);)p.push(f[1]||f[2]);return m}function o(e){return e.f}function i(e,t){t=t||{},t.sourceMap?e+="\n//# "+O+"=data:application/json;charset=utf-8;base64,"+M(JSON.stringify(t.sourceMap)):t.sourceURL&&(e+="\n//# sourceURL="+t.sourceURL);try{return S(e)}catch(r){if(x)return void a(e,t.sourceURL||"");throw j&&"SyntaxError"===r.name&&u(e),r}}function u(e){var t,r;t=C+":text/javascript;charset=utf-8,"+encodeURIComponent(e),r=document.createElement("script"),r.src=t,r.onload=function(){E.removeChild(r)},E.appendChild(r)}function a(e,t){var r=new q;try{r._compile("module.exports = function () {\n"+e+"\n};",t)}catch(n){return void console.error(n)}r.exports()}function s(e){var t,r={};for(t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);return r}function c(e){var t,r;if("number"==typeof e)t=f(e);else for(t="",r=0;r<e.length;r+=1)t+=f(e[r]);return t}function f(e){var t,r="";0>e?e=-e<<1|1:e<<=1;do t=31&e,e>>=5,e>0&&(t|=32),r+=k[t];while(e>0);return r}function p(e){return new Buffer(e).toString("base64")}function l(e,t){var r,n,o;if(!t||!t.source)throw new Error("You must supply an options object with a `source` property to rcu.generateSourceMap()");return o=new Array((t.offset||0)+1).join(";"),r=e.script.split("\n"),n=o+r.map(function(t,r){return 0===r?c([0,0,e.scriptStart.line,e.scriptStart.column]):1===r?c([0,0,1,-e.scriptStart.column]):"AACA"}).join(";"),new T({file:t.file,sources:[t.source],sourcesContent:[e.source],names:[],mappings:n})}function d(e,t,r,o){var u,a,s,c,f,p,d,m,h,v;if(t=t||{},a=t.url||"",c=t.loadImport,p=t.loadModule,u=n(e),s=function(){var n,s,c,p,d,m;if(n={template:u.template,partials:u.partials,css:u.css,components:f},u.script){var h=l(u,{source:a,content:e});try{if(c=new i.Function("component","require","Ractive",u.script,{sourceMap:h}),p={},c(p,t.require,$.Ractive),d=p.exports,"object"==typeof d)for(m in d)d.hasOwnProperty(m)&&(n[m]=d[m]);s=$.Ractive.extend(n)}catch(v){return void o(v)}r(s)}else s=$.Ractive.extend(n),r(s)},m=u.imports.length+(p?u.modules.length:0)){if(h=function(){--m||(v?s():setTimeout(s,0))},u.imports.length){if(!c)throw new Error('Component definition includes imports (e.g. `<link rel="ractive" href="'+u.imports[0].href+'">`) but no loadImport method was passed to rcu.make()');f={},u.imports.forEach(function(e){c(e.name,e.href,a,function(t){f[e.name]=t,h()})})}p&&u.modules.length&&(d={},u.modules.forEach(function(e){p(e,e,a,function(t){d[e]=t,h()})}))}else setTimeout(s,0);v=!0}function m(e,t){var r,n,o;if(!t||"/"===e.charAt(0))return e;for(r=(t||"").split("/"),n=e.split("/"),r.pop();o=n.shift();)".."===o?r.pop():"."!==o&&r.push(o);return r.join("/")}function h(t,r,n,o){var i,u;return u=F.resolve(t,"."===t[0]?r:n),o&&Y[u]||(i=N(u).then(function(t){return new e.Promise(function(e,r){F.make(t,{url:u,loadImport:function(e,t,i,u){h(t,i,n,o).then(u,r)},require:v},e,r)})}),Y[u]=i),Y[u]}function v(e){var t,r;if(t=H.modules.hasOwnProperty(e)?H.modules[e]:z.hasOwnProperty(e)?z[e]:null,!t&&"function"==typeof require)try{t=require(e)}catch(n){if("undefined"==typeof process)throw n;t=require(process.cwd()+"/"+e)}if(!t)throw r=/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(e)?"."+e:'["'+e+'"]',new Error('Ractive.load() error: Could not find dependency "'+e+'". It should be exposed as Ractive.load.modules'+r+" or window"+r);return t}function y(t,r){var n=new e.Promise(function(n,o){var i,u;i=w(document.querySelectorAll('link[rel="ractive"]')),u=i.length,i.forEach(function(i){var a=g(i);h(i.getAttribute("href"),"",t,r).then(function(t){e.components[a]=t,--u||n()},o)})});return n}function g(e){return e.getAttribute("name")||F.getName(e.getAttribute("href"))}function w(e){for(var t=[],r=e.length;r--;)t[r]=e[r];return t}function b(t,r,n){var o=new e.Promise(function(e,o){var i,u,a=0,s={};u=function(i){var u=t[i];h(u,r,r,n).then(function(t){s[i]=t,--a||e(s)},o)};for(i in t)t.hasOwnProperty(i)&&(a+=1,u(i))});return o}function R(e){var t=R.baseUrl,r=R.cache!==!1;return e?"object"==typeof e?b(e,t,r):h(e,t,t,r):y(t,r)}var S,j,x,E,q,M,A=/require\s*\(\s*(?:"([^"]+)"|'([^']+)')\s*\)/g,P=3,O="sourceMappingUrl",C="data";S=eval,"undefined"!=typeof document?(j=!0,E=document.getElementsByTagName("head")[0]):"undefined"!=typeof process&&(x=!0,q=(require.nodeRequire||require)("module")),M="function"==typeof btoa?btoa:"function"==typeof Buffer?function(e){return new Buffer(e,"utf-8").toString("base64")}:function(){},i.Function=function(){var e,t,r,n,o=[];for(e=arguments.length;e--;)o[e]=arguments[e];return n="object"==typeof o[o.length-1]?o.pop():{},1===o.length&&"[object Array]"===Object.prototype.toString.call(o)&&(o=o[0]),n.sourceMap&&(n.sourceMap=s(n.sourceMap),n.sourceMap.mappings=";"+n.sourceMap.mappings),t=o.pop(),r="(function ("+o.join(", ")+") {\n"+t+"\n})",i(r,n)};var U={},k={};"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split("").forEach(function(e,t){U[e]=t,k[t]=e});var L=p,I=function(e){this.version=3,this.file=e.file,this.sources=e.sources,this.sourcesContent=e.sourcesContent,this.names=e.names,this.mappings=e.mappings};I.prototype={toString:function(){return JSON.stringify(this)},toUrl:function(){return"data:application/json;charset=utf-8;base64,"+L(this.toString())}};var N,T=I,B=m,$={init:function(e){$.Ractive=e},parse:n,make:d,generateSourceMap:l,resolve:B,getName:t},F=$;N="undefined"!=typeof XMLHttpRequest?function(t){return new e.Promise(function(e,r){var n,o,i;n=new XMLHttpRequest,n.open("GET",t),o=function(){4!==n.readyState||i||(e(n.responseText),i=!0)},n.onload=n.onreadystatechange=o,n.onerror=r,n.send(),4===n.readyState&&o()})}:function(t){return new e.Promise(function(e,r){require("fs").readFile(t,function(t,n){return t?r(t):void e(n.toString())})})};var Y={},z="undefined"!=typeof window?window:{};F.init(e),R.baseUrl="",R.modules={};var H=R;return H});
