!function(a,b){"use strict";if("function"==typeof define&&define.amd)define(["ractive"],b);else if("undefined"!=typeof module&&module.exports&&"function"==typeof require)module.exports=b(require("ractive"),require("fs"),require("path"));else{if(!a.Ractive)throw new Error("Could not find Ractive! It must be loaded before the Ractive.load plugin");b(a.Ractive)}}("undefined"!=typeof window?window:this,function(a,b){"use strict";var c=function(){var a,b=function(a){var b,c,d;return b=a.split("/"),c=b.pop(),d=c.lastIndexOf("."),-1!==d&&(c=c.substr(0,d)),c},c=function(b){function c(a){return a.f}var d=/require\s*\(\s*(?:"([^"]+)"|'([^']+)')\s*\)/g;return function(e){var f,g,h,i,j,k,l,m,n,o;for(f=a.parse(e,{noStringify:!0,interpolateScripts:!1,interpolateStyles:!1}),g=[],i=[],k=[],m=[],n=f.length;n--;)o=f[n],o&&7===o.t&&("link"===o.e&&o.a&&"ractive"===o.a.rel[0]&&g.push(f.splice(n,1)[0]),"script"!==o.e||o.a&&o.a.type&&"text/javascript"!==o.a.type[0]||i.push(f.splice(n,1)[0]),"style"!==o.e||o.a&&o.a.type&&"text/css"!==o.a.type[0]||k.push(f.splice(n,1)[0]));for(;/^\s*$/.test(f[0]);)f.shift();for(;/^\s*$/.test(f[f.length-1]);)f.pop();for(h=g.map(function(a){var c,d;if(c=a.a.href&&a.a.href[0],d=a.a.name&&a.a.name[0]||b(c),"string"!=typeof d)throw new Error("Error parsing link tag");return{name:d,href:c}}),j=i.map(c).join(";");l=d.exec(j);)m.push(l[1]||l[2]);return{template:f,imports:h,script:j,css:k.map(c).join(" "),modules:m}}}(b),d=function(){function a(a,g){g="function"==typeof g?{callback:g}:g||{},g.sourceURL&&(a+="\n//# sourceURL="+g.sourceURL);try{return d(a)}catch(h){if(f)return void c(a,g.sourceURL||"");throw e&&"SyntaxError"===h.name&&b(a),h}}function b(a){var b,c;b="data:text/javascript;charset=utf-8,"+encodeURIComponent(a),c=document.createElement("script"),c.src=b,c.onload=function(){g.removeChild(c)},g.appendChild(c)}function c(a,b){var c=new h;try{c._compile("module.exports = function () {\n"+a+"\n};",b)}catch(d){return void console.error(d)}c.exports()}var d,e,f,g,h;return d=eval,"undefined"!=typeof document?(e=!0,g=document.getElementsByTagName("head")[0]):"undefined"!=typeof process&&(f=!0,h=(require.nodeRequire||require)("module")),a.Function=function(){var b,c,d,e=[];for(b=arguments.length;b--;)e[b]=arguments[b];return c=e.pop(),d="(function ("+e.join(", ")+") {\n"+c+"\n})",a(d)},a}(),e=function(b,c){return function(d,e,f,g){var h,i,j,k,l,m,n,o,p,q;if(e=e||{},i=e.url||"",k=e.loadImport,m=e.loadModule,h=b(d),j=function(){var b,d,j,k,m,n,o;if(b={template:h.template,css:h.css,components:l},h.script){try{if(j=h.script+"\n//# sourceURL="+i.substr(i.lastIndexOf("/")+1)+".js",k=new c.Function("component","require","Ractive",h.script),m={},k(m,e.require,a),n=m.exports,"object"==typeof n)for(o in n)n.hasOwnProperty(o)&&(b[o]=n[o]);d=a.extend(b)}catch(p){return void g(p)}f(d)}else d=a.extend(b),f(d)},o=h.imports.length+(m?h.modules.length:0)){if(p=function(){--o||(q?j():setTimeout(j,0))},h.imports.length){if(!k)throw new Error('Component definition includes imports (e.g. `<link rel="ractive" href="'+h.imports[0].href+'">`) but no loadImport method was passed to rcu.make()');l={},h.imports.forEach(function(a){k(a.name,a.href,i,function(b){l[a.name]=b,p()})})}m&&h.modules.length&&(n={},h.modules.forEach(function(a){m(a,a,i,function(b){n[a]=b,p()})}))}else setTimeout(j,0);q=!0}}(c,d),f=function(a,b){var c,d,e;if(!b||"/"===a.charAt(0))return a;for(c=(b||"").split("/"),d=a.split("/"),c.pop();e=d.shift();)".."===e?c.pop():"."!==e&&c.push(e);return c.join("/")},g=function(b,c,d,e){return{init:function(b){a=b},parse:b,make:c,resolve:d,getName:e}}(c,e,f,b);return g}(),d=function(){var c;return c="function"==typeof XMLHttpRequest?function(b){return new a.Promise(function(a,c){var d,e,f;d=new XMLHttpRequest,d.open("GET",b),e=function(){4!==d.readyState||f||(a(d.responseText),f=!0)},d.onload=d.onreadystatechange=e,d.onerror=c,d.send(),4===d.readyState&&e()})}:function(c){return new a.Promise(function(a,d){b.readFile(c,function(b,c){return b?d(b):void a(c.toString())})})}}(),e=function(b,c){function d(g,h,i){var j,k;return k=b.resolve(g,"."===g[0]?h:i),f[k]||(j=c(k).then(function(c){return new a.Promise(function(a,f){b.make(c,{url:k,loadImport:function(a,b,c,e){d(b,c,i).then(e,f)},require:e},a,f)})}),f[k]=j),f[k]}function e(b){var c,d;if(c=a.lib[b]||window[b],c||"function"!=typeof require||(c=require(b)),!c)throw d=/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(b)?"."+b:'["'+b+'"]',new Error('Ractive.load() error: Could not find dependency "'+b+'". It should be exposed as Ractive.lib'+d+" or window"+d);return c}var f={};return d}(c,d),f=function(b,c){function d(a){return a.getAttribute("name")||b.getName(a.getAttribute("href"))}function e(a){for(var b=[],c=a.length;c--;)b[c]=a[c];return b}return function(b){var f=new a.Promise(function(f,g){var h,i;h=e(document.querySelectorAll('link[rel="ractive"]')),i=h.length,h.forEach(function(e){var h=d(e);c(e.getAttribute("href"),b).then(function(b){a.components[h]=b,--i||f()},g)})});return f}}(c,e),g=function(b){return function(c,d){var e=new a.Promise(function(a,e){var f,g,h=0,i={};g=function(f){var g=c[f];b(g,d,d).then(function(b){i[f]=b,--h||a(i)},e)};for(f in c)c.hasOwnProperty(f)&&(h+=1,g(f))});return e}}(e),h=function(b,c,d,e){b.init(a);var f=function g(a){var b=g.baseUrl;return a?"object"==typeof a?e(a,b):d(a,b,b):c(b)};return f.baseUrl="",f}(c,f,e,g);return a.lib=a.lib||{},a.load=h,h});